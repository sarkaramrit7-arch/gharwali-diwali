<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üè† Gharwali Diwali ‚ö° - @Anvi & Amrit</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Pacifico&display=swap" rel="stylesheet">
    
    <!-- External Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Submission Modal -->
    <div class="submission-modal" id="submissionModal">
        <div class="submission-content">
            <span class="submission-close" onclick="closeSubmissionModal()">&times;</span>
            <div class="submission-header">
                <h2 id="submissionTitle">üîí Challenge Completed!</h2>
                <p id="submissionSubtitle">Here are your team's submissions</p>
            </div>
            <div class="submission-body" id="submissionBody">
                <!-- Content will be populated dynamically -->
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Returning User Confirmation Screen -->
        <div class="login-screen hidden" id="confirmScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <h2 style="text-align: center; color: #667eea; margin: 20px 0;">Welcome Back!</h2>
            <div class="login-form">
                <div class="form-group">
                    <label>Are you sure you are:</label>
                    <p id="confirmPlayerName" style="font-size: 24px; font-weight: bold; color: #667eea; padding: 15px; background: #f0f0f0; border-radius: 8px; text-align: center; margin: 15px 0;"></p>
                </div>
                <div class="form-group">
                    <label>Your Team:</label>
                    <p id="confirmTeamName" style="font-size: 20px; font-weight: bold; color: #51cf66; padding: 12px; background: #f0f0f0; border-radius: 8px; text-align: center;"></p>
                </div>
                <button type="button" class="login-btn" onclick="confirmIdentity()" style="background: #51cf66;">‚úì Yes, Continue</button>
                <button type="button" class="login-btn" onclick="startFresh()" style="background: #ff6b6b; margin-top: 15px;">‚úó No, Start Fresh</button>
            </div>
        </div>

        <!-- Step 1: Name Selection Screen -->
        <div class="login-screen hidden" id="nameScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <div class="login-form">
                <div class="form-group">
                    <label for="playerName">Select Your Name</label>
                    <div style="position: relative;">
                        <input type="text" 
                               id="playerName" 
                               placeholder="Type to search or click to see all..."
                               autocomplete="off"
                               required
                               style="width: 100%; padding: 12px; border: 2px solid #667eea; border-radius: 10px; background: white; color: #333; font-size: 16px; font-weight: 500;">
                        <div id="nameDropdown" 
                             style="display: none; position: absolute; top: 100%; left: 0; right: 0; max-height: 300px; overflow-y: auto; background: rgba(50, 50, 70, 0.95); border: 2px solid rgba(255,255,255,0.3); border-radius: 10px; margin-top: 5px; backdrop-filter: blur(10px); z-index: 1000;">
                </div>
                    </div>
                    <input type="hidden" id="playerNameValidated" value="">
                </div>
                <button type="button" class="login-btn" onclick="proceedToPassword()">Continue</button>
                <p class="error-message" id="nameError">Please enter your name!</p>
            </div>
            <div class="info-box">
                <h3>üéÆ Multiplayer Features:</h3>
                <p>‚Ä¢ Real-time collaboration with your team<br>
                ‚Ä¢ Shared timer across all players<br>
                ‚Ä¢ See your teammates' progress live<br>
                ‚Ä¢ Work together to win the challenge!</p>
            </div>
        </div>

        <!-- Step 2: Team Assignment Screen -->
        <div class="login-screen hidden" id="teamScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <div class="login-form">
                <div class="form-group">
                    <label for="displayNameLabel2">Player Name</label>
                    <p id="displayNameLabel2" style="font-size: 20px; font-weight: bold; color: #667eea; padding: 10px; background: #f0f0f0; border-radius: 8px; text-align: center;"></p>
                </div>
                <div class="form-group">
                    <label for="displayTeamLabel2">Your Team</label>
                    <p id="displayTeamLabel2" style="font-size: 18px; font-weight: bold; color: #51cf66; padding: 10px; background: #f0f0f0; border-radius: 8px; text-align: center;"></p>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        üë• Current Team Members
                        <span class="info-tooltip">
                            ‚ÑπÔ∏è
                            <span class="info-tooltip-text">
                                Teams are assigned using a consistent algorithm based on your name. Same name = Same team every time! ‚ú®
                            </span>
                        </span>
                    </label>
                    <div id="teamMembersList" style="padding: 15px; background: #f8f9fa; border-radius: 8px; min-height: 50px;">
                        <p style="color: #999; text-align: center; font-size: 14px;">Loading team members...</p>
                    </div>
                </div>
                <button type="button" class="login-btn" onclick="proceedToChallenges()">Continue</button>
                <button type="button" class="login-btn" onclick="leaveTeamFromAssignment()" style="background: #ff6b6b; width: 100%; margin-top: 15px;">Leave Team</button>
            </div>
        </div>

        <!-- Step 3: Challenges Selection Screen -->
        <div class="login-screen hidden" id="challengesScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <h2 id="countdownHeading" style="text-align: center; color: #667eea; margin: 20px 0;">üé™ Let The Games Begin In... üéä</h2>
            <div id="countdownTimer" style="text-align: center; font-size: 28px; font-weight: bold; background: linear-gradient(135deg, #FF6B35, #FF9933, #FFD700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin: 10px 0 20px 0; font-family: 'Courier New', monospace;">
                Loading countdown...
            </div>
            <p id="countdownSubtext" style="text-align: center; color: #999; font-size: 14px; font-style: italic; margin-bottom: 20px;">
                üìÖ October 18, 2025 ‚ú®
            </p>
            
            <!-- Leaderboard -->
            <div class="leaderboard-container">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 15px;">üèÜ Leaderboard</h3>
                <div class="leaderboard-scroll">
                    <table class="leaderboard">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Team Name</th>
                                <th>Ch 1</th>
                                <th>Ch 2</th>
                                <th>Ch 3</th>
                                <th>Ch 4</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <tr>
                                <td>1</td>
                                <td>Phuljhari</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Anaar</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Charkhi</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Bullet</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Rocket</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Challenges Grid -->
            <div class="challenges-grid">
                <div class="challenge-card" id="challenge1" data-challenge="1">
                    Challenge 1<br>üîí
                </div>
                <div class="challenge-card" id="challenge2" data-challenge="2">
                    Challenge 2<br>üîí
                </div>
                <div class="challenge-card" id="challenge3" data-challenge="3">
                    Challenge 3<br>üîí
                </div>
                <div class="challenge-card" id="challenge4" data-challenge="4">
                    Challenge 4<br>üîí
                </div>
            </div>
            
            <button type="button" class="login-btn" onclick="backToTeamFromChallenges()" style="background: #999; margin-top: 25px;">‚Üê Back</button>
        </div>

        <!-- Step 4: Password Screen -->
        <div class="login-screen hidden" id="passwordScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <h2 style="text-align: center; color: #667eea; margin: 20px 0;">Challenge 4</h2>
            
            <!-- House Layout Preview -->
            <div style="max-width: 600px; margin: 20px auto; padding: 0 15px;">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 15px;">üè† House Layout Preview</h3>
                <div class="floorplan-container" style="pointer-events: none; opacity: 0.9;">
                    <div class="floorplan">
                        <div class="room backroom" data-room="backroom">
                            <span>Backroom</span>
                        </div>
                        <div class="room family-room" data-room="family-room">
                            <span>Family Room</span>
                        </div>
                        <div class="room kitchen" data-room="kitchen">
                            <span>Kitchen</span>
                        </div>
                        <div class="room laundry" data-room="laundry">
                            <span>Laundry</span>
                        </div>
                        <div class="room bathroom" data-room="bathroom">
                            <span>Bathroom</span>
                        </div>
                        <div class="room office" data-room="office">
                            <span>Office</span>
                        </div>
                        <div class="room stairs" data-room="stairs">
                            <span>Stairs</span>
                        </div>
                        <div class="room dining-room" data-room="dining-room">
                            <span>Dining Room</span>
                        </div>
                        <div class="room living-room" data-room="living-room">
                            <span>Living room</span>
                        </div>
                    </div>
                </div>
                <p style="text-align: center; color: #999; font-size: 14px; margin-top: 10px;">
                    Count items at different locations in each room!
                </p>
            </div>
            
            <!-- Practice Room Example -->
            <div style="max-width: 500px; margin: 30px auto; padding: 20px; background: rgba(255, 255, 255, 0.95); border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 10px;">üéØ Try It Out!</h3>
                <p style="text-align: center; color: #666; font-size: 14px; margin-bottom: 20px;">
                    Click a circle to start counting, then use +/‚àí buttons to adjust
                </p>
                <div class="markers-grid" style="grid-template-columns: repeat(3, 1fr); max-width: 350px; margin: 0 auto; gap: 15px;">
                    <div class="marker-point" id="practice1" onclick="adjustPracticeCount(1, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice2" onclick="adjustPracticeCount(2, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice3" onclick="adjustPracticeCount(3, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice4" onclick="adjustPracticeCount(4, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice5" onclick="adjustPracticeCount(5, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice6" onclick="adjustPracticeCount(6, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice7" onclick="adjustPracticeCount(7, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice8" onclick="adjustPracticeCount(8, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                    <div class="marker-point" id="practice9" onclick="adjustPracticeCount(9, 1)">
                        <div class="marker-main-number">‚Ä¢</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button type="button" onclick="resetPracticeRoom()" onmouseover="this.style.background='#777'" onmouseout="this.style.background='#999'" style="padding: 8px 20px; background: #999; color: white; border: none; border-radius: 8px; font-size: 13px; cursor: pointer; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;">
                        üîÑ Reset Practice
                    </button>
                </div>
                <p style="text-align: center; color: #999; font-size: 12px; margin-top: 10px; font-style: italic;">
                    üí° This is just a preview - your real progress will be saved in the game!
                </p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="password">Enter Password to Start</label>
                    <input type="password" id="password" placeholder="Enter game password" required>
                </div>
                <button type="button" class="login-btn" onclick="startGameLogin()">Start Game</button>
                <p class="error-message" id="passwordError">Incorrect password! Try again.</p>
                <button type="button" class="login-btn" onclick="backToChallengesFromPassword()" style="background: #999; margin-top: 15px;">‚Üê Back</button>
            </div>
        </div>

        <!-- Challenge 1: Password Screen -->
        <div class="login-screen hidden" id="challenge1PasswordScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <h2 style="text-align: center; color: #667eea; margin: 20px 0;">Challenge 1 - Memory Game</h2>
            
            <div style="max-width: 500px; margin: 20px auto; padding: 20px; background: rgba(255, 255, 255, 0.95); border-radius: 15px;">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 15px;">üìù How It Works</h3>
                <p style="color: #666; line-height: 1.6; margin-bottom: 10px;">
                    <strong>Game 1:</strong> Add up to 25 memory items (just type and press Enter)<br>
                    <strong>Game 2:</strong> Track changes - Add items (max 5) and Remove items (max 5)
                </p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="challenge1Password">Enter Password to Start</label>
                    <input type="password" id="challenge1Password" placeholder="Enter game password" required>
                </div>
                <button type="button" class="login-btn" onclick="startChallenge1()">Start Challenge</button>
                <p class="error-message" id="challenge1PasswordError">Incorrect password! Try again.</p>
                <button type="button" class="login-btn" onclick="backToChallengesFromChallenge1Password()" style="background: #999; margin-top: 15px;">‚Üê Back</button>
            </div>
        </div>

        <!-- Challenge 1: Game Selection Screen -->
        <div class="login-screen hidden" id="challenge1SelectionScreen">
            <h1 class="login-title">üè† Gharwali Diwali ‚ö°</h1>
            <p class="login-subtitle">@Anvi & Amrit</p>
            <div class="team-name" id="ch1SelectionTeamName"></div>
            <h2 style="text-align: center; color: #667eea; margin: 20px 0;">Choose Your Game</h2>
            
            <div style="max-width: 600px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px;">
                <div onclick="selectGame1()" style="padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; cursor: pointer; text-align: center; color: white; transition: transform 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 10px;">üìù</div>
                    <h3 style="margin-bottom: 10px;">Game 1</h3>
                    <p style="font-size: 14px; opacity: 0.9;">Add up to 25 items</p>
                </div>
                <div onclick="selectGame2()" style="padding: 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 15px; cursor: not-allowed; text-align: center; color: white; transition: transform 0.3s; opacity: 0.5; pointer-events: none;" onmouseover="if(this.style.pointerEvents === 'auto') this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 10px;">‚ûï‚ûñ</div>
                    <h3 style="margin-bottom: 10px;">Game 2</h3>
                    <p id="game2Description" style="font-size: 14px; opacity: 0.9; display: none;">Track Added & Removed</p>
                    <p id="game2LockText" style="font-size: 16px; font-weight: bold; margin-top: 10px;">üîí Locked</p>
                </div>
            </div>
            
            <button type="button" class="login-btn" onclick="backToChallengesFromGame1Selection()" style="background: #999; margin: 20px auto; display: block; max-width: 300px;">‚Üê Back to Challenges</button>
        </div>

        <!-- Challenge 1: Game 1 Screen -->
        <div class="game-screen hidden" id="game1Screen">
            <h1>üè† Gharwali Diwali ‚ö° - Challenge 1</h1>
            <p style="text-align: center; color: #999; font-size: 16px; margin-bottom: 10px;">@Anvi & Amrit</p>
            <div class="team-name" id="game1TeamName"></div>
            <div class="player-info" id="game1PlayerName"></div>
            <h2 style="text-align: center; color: #667eea; margin: 10px 0;">Game 1: Memory Items</h2>
            
            <!-- Point System Info -->
            <div style="max-width: 600px; margin: 15px auto; padding: 15px; background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border: 2px solid #667eea; border-radius: 12px; text-align: center;">
                <p style="margin: 0; font-size: 14px; color: #667eea; font-weight: 600;">
                    üèÜ Point System: 1st Place = 50 points | Last Place = 0 points
                </p>
            </div>
            
            <div class="timer" id="game1Timer" style="font-size: 48px; font-weight: bold; text-align: center; color: #667eea; margin: 20px 0;">1:00</div>
            
            <div style="max-width: 800px; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #667eea;">Items Added: <span id="game1Count">0</span> / 25</h3>
                    <button onclick="backToGame1Selection()" style="padding: 10px 20px; background: #999; color: white; border: none; border-radius: 8px; cursor: pointer;">‚Üê Back</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <input type="text" id="game1Input" placeholder="Type an item and press Enter..." style="width: 100%; padding: 15px; border: 2px solid #667eea; border-radius: 10px; font-size: 16px;" onkeypress="if(event.key==='Enter') addGame1Item()">
                    <button onclick="addGame1Item()" style="width: 100%; margin-top: 10px; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer;">
                        ‚ûï Add Item
                    </button>
                </div>
                
                <div id="game1Items" style="display: flex; flex-wrap: wrap; gap: 10px; min-height: 100px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <p style="color: #999; margin: auto;">No items yet. Start typing!</p>
                </div>
            </div>
        </div>

        <!-- Challenge 1: Game 2 Screen -->
        <div class="game-screen hidden" id="game2Screen">
            <h1>üè† Gharwali Diwali ‚ö° - Challenge 1</h1>
            <p style="text-align: center; color: #999; font-size: 16px; margin-bottom: 10px;">@Anvi & Amrit</p>
            <div class="team-name" id="game2TeamName"></div>
            <div class="player-info" id="game2PlayerName"></div>
            <h2 style="text-align: center; color: #667eea; margin: 10px 0;">Game 2: Track Changes</h2>
            
            <!-- Point System Info -->
            <div style="max-width: 600px; margin: 15px auto; padding: 15px; background: linear-gradient(135deg, #f093fb15 0%, #f5576c15 100%); border: 2px solid #f093fb; border-radius: 12px; text-align: center;">
                <p style="margin: 0; font-size: 14px; color: #c23866; font-weight: 600;">
                    üèÜ Point System: Each Right Answer = +5 points | ‚ú® No Negative Marking
                </p>
            </div>
            
            <div class="timer" id="game2Timer" style="font-size: 48px; font-weight: bold; text-align: center; color: #f093fb; margin: 20px 0;">1:00</div>
            
            <div style="max-width: 900px; margin: 20px auto;">
                <button onclick="backToGame2Selection()" style="padding: 10px 20px; background: #999; color: white; border: none; border-radius: 8px; cursor: pointer; margin-bottom: 20px;">‚Üê Back</button>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- Added Section -->
                    <div style="padding: 20px; background: #d4edda; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #155724; margin-bottom: 15px;">‚ûï Added: <span id="game2AddedCount">0</span> / 5</h3>
                        <input type="text" id="game2AddedInput" placeholder="Type and press Enter..." style="width: 100%; padding: 12px; border: 2px solid #28a745; border-radius: 8px; margin-bottom: 10px;" onkeypress="if(event.key==='Enter') addGame2Added()">
                        <button onclick="addGame2Added()" style="width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">‚ûï Add</button>
                        <div id="game2AddedItems" style="margin-top: 15px; display: flex; flex-direction: column; gap: 8px; min-height: 80px;">
                            <p style="color: #666; text-align: center; margin: auto;">No items added</p>
                        </div>
                    </div>
                    
                    <!-- Removed Section -->
                    <div style="padding: 20px; background: #f8d7da; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #721c24; margin-bottom: 15px;">‚ûñ Removed: <span id="game2RemovedCount">0</span> / 5</h3>
                        <input type="text" id="game2RemovedInput" placeholder="Type and press Enter..." style="width: 100%; padding: 12px; border: 2px solid #dc3545; border-radius: 8px; margin-bottom: 10px;" onkeypress="if(event.key==='Enter') addGame2Removed()">
                        <button onclick="addGame2Removed()" style="width: 100%; padding: 10px; background: #dc3545; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">‚ûñ Add to Removed</button>
                        <div id="game2RemovedItems" style="margin-top: 15px; display: flex; flex-direction: column; gap: 8px; min-height: 80px;">
                            <p style="color: #666; text-align: center; margin: auto;">No items removed</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Challenge 4: Game Screen -->
        <div class="game-screen" id="gameScreen">
            <div class="connection-status disconnected" id="connectionStatus">
                üî¥ Connecting to server...
            </div>
            
            <h1>üè† Gharwali Diwali ‚ö°</h1>
            <p style="text-align: center; color: #999; font-size: 16px; margin-bottom: 10px;">@Anvi & Amrit</p>
            <div class="team-name" id="displayTeamName"></div>
            <div class="player-info" id="displayPlayerName"></div>
            <div class="active-players" id="activePlayers">üë• Active Players: 1</div>
            <h2 style="text-align: center; color: #667eea; margin: 10px 0;">Challenge 4: The Ultimate Spot Finder</h2>
            
            <!-- Point System Info -->
            <div style="max-width: 600px; margin: 15px auto; padding: 15px; background: linear-gradient(135deg, #4ade8015 0%, #3b82f615 100%); border: 2px solid #3b82f6; border-radius: 12px; text-align: center;">
                <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 600;">
                    üéØ Point System: Correct Find = +5 pts | False Find = -5 pts | 81 Total Locations
                </p>
            </div>
            
            <p class="subtitle">Click on any room to count items at each location!</p>
            
            <div class="timer" id="timer">1:00</div>
            <div class="game-over" id="gameOver">üéâ Game Complete!</div>
            
            <div class="floorplan-container">
                <div class="floorplan">
                    <div class="room backroom" data-room="backroom" onclick="openRoom('backroom')">
                        <span>Backroom</span>
                        <span class="room-progress" id="progress-backroom">0/9</span>
                    </div>
                    <div class="room family-room" data-room="family-room" onclick="openRoom('family-room')">
                        <span>Family Room</span>
                        <span class="room-progress" id="progress-family-room">0/9</span>
                    </div>
                    <div class="room kitchen" data-room="kitchen" onclick="openRoom('kitchen')">
                        <span>Kitchen</span>
                        <span class="room-progress" id="progress-kitchen">0/9</span>
                    </div>
                    <div class="room laundry" data-room="laundry" onclick="openRoom('laundry')">
                        <span>Laundry</span>
                        <span class="room-progress" id="progress-laundry">0/9</span>
                    </div>
                    <div class="room bathroom" data-room="bathroom" onclick="openRoom('bathroom')">
                        <span>Bathroom</span>
                        <span class="room-progress" id="progress-bathroom">0/9</span>
                    </div>
                    <div class="room office" data-room="office" onclick="openRoom('office')">
                        <span>Office</span>
                        <span class="room-progress" id="progress-office">0/9</span>
                    </div>
                    <div class="room stairs" data-room="stairs" onclick="openRoom('stairs')">
                        <span>Stairs</span>
                        <span class="room-progress" id="progress-stairs">0/9</span>
                    </div>
                    <div class="room dining-room" data-room="dining-room" onclick="openRoom('dining-room')">
                        <span>Dining Room</span>
                        <span class="room-progress" id="progress-dining-room">0/9</span>
                    </div>
                    <div class="room living-room" data-room="living-room" onclick="openRoom('living-room')">
                        <span>Living room</span>
                        <span class="room-progress" id="progress-living-room">0/9</span>
                    </div>
                </div>
            </div>
            
            <p class="instruction">üí° Click any room to count items ‚Ä¢ Use +/‚àí buttons to adjust counts ‚Ä¢ Timer starts automatically! ‚Ä¢ All team members see changes in real-time!</p>
            
            <div class="stats">
                Total Points Counted: <strong><span id="totalCount">0</span>/81</strong> locations
            </div>
            
            <div class="controls">
                <button class="reset-btn" onclick="backToChallengesFromGame()" style="background: #999;">‚Üê Back to Challenges</button>
            </div>
        </div>
    </div>

    <!-- Surprise Message -->
    <div class="surprise-overlay" id="surpriseOverlay"></div>
    <div class="surprise-message" id="surpriseMessage">
        üéâ PLOT TWIST! üéâ<br>
        You get 30 MORE SECONDS!<br>
        It's not over yet! üòÑ
    </div>

    <!-- Room Detail Modal -->
    <div class="room-modal" id="roomModal">
        <div class="room-detail">
            <div class="room-detail-header">
                <h2 class="room-detail-title" id="modalRoomTitle"></h2>
                <button class="close-btn" onclick="closeRoom()">Close</button>
            </div>
            <div class="markers-grid" id="markersGrid"></div>
            <div class="room-stats">
                Points counted in this room: <strong><span id="roomCount">0</span>/9</strong>
            </div>
        </div>
    </div>

    <!-- Sync Indicator -->
    <div class="sync-indicator" id="syncIndicator">üîÑ Syncing...</div>


    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, onValue, update, remove, onDisconnect } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        window.firebase = { initializeApp };
        window.firebaseDB = { ref, set, get, onValue, update, remove, onDisconnect };
        window.getDatabase = getDatabase;
    </script>
    
    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
        <source src="music/say-na-say-na.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Music Control Button -->
    <button id="musicToggle" class="music-toggle" onclick="toggleMusic()" title="Toggle Music">
        üîä
    </button>

    <!-- Application Script -->
    <script src="js/app.js"></script>
</body>
</html>
